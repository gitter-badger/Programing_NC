DEF NCK STRING[1] AXIS_VER		;垂直轴								
DEF NCK STRING[1] AXIS_HORI		;水平轴			
;修整主参数(DRESSER)
DEF NCK INT DRESSER[0]			;修整器选择(0VW/1XZ/2滚压/3液压)	DRESSER[0]
DEF NCK REAL DRESSER[1]		;滚压轮齿高							DRESSER[1]
DEF NCK REAL DRESSER[2]	;两轮中心距							DRESSER[2]
DEF NCK INT DRESSER[3]			;修整轮类型(0单/1双/2方)			DRESSER[3]
DEF NCK INT DRESSER[4]				;齿形选择(0三角/1梯形/2双圆弧)		DRESSER[4]
DEF NCK BOOL DRESSER[5]			;砂轮状态(0新/1旧)					DRESSER[5]
DEF NCK BOOL DRESSER[6]		;修整报警(0无报警)					DRESSER[6]
DEF NCK STRING[1] AXIS_VER		;垂直轴								
DEF NCK STRING[1] AXIS_HORI		;水平轴								
DEF NCK REAL DRESSER[9]			;修整累积							DRESSER[9]
DEF NCK REAL DRESSER[10]			;当前速度							DRESSER[10]
DEF NCK INT DRESSER[11]		;粗修次数							DRESSER[11]
DEF NCK INT DRESSER[12]		;精修次数							DRESSER[12]
DEF NCK INT DRESSER[13]		;新砂轮初始余量对应修整次数			DRESSER[13]
DEF NCK REAL DRESSER[14]		;粗修进给							DRESSER[14]
DEF NCK REAL DRESSER[15]		;精修进给							DRESSER[15]
DEF NCK REAL DRESSER[16]		;粗修速度							DRESSER[16]
DEF NCK REAL DRESSER[17]		;精修速度							DRESSER[17]
DEF NCK INT DRESSER[18]	;当前粗修次数						DRESSER[18]
DEF NCK INT DRESSER[19]	;当前精修次数						DRESSER[19]
DEF NCK INT DRESSER[20]	;当前新砂轮抬刀需要修整次数			DRESSER[20]
DEF NCK REAL DRESSER[21]			;修整轮与砂轮中心位置水平坐标		DRESSER[21]
DEF NCK REAL DRESSER[22]		;砂轮宽								DRESSER[22]
DEF NCK REAL DRESSER[23]			;砂轮直径							DRESSER[23]
DEF NCK REAL DRESSER[24]		;砂轮当前直径						DRESSER[24]

DEF NCK INT DRESSER[25]		;纯修整粗修次数						DRESSER[25]
DEF NCK INT DRESSER[26]		;纯修整精修次数						DRESSER[26]
DEF NCK REAL DRESSER[27]		;纯修整粗修进给						DRESSER[27]
DEF NCK REAL DRESSER[28]		;纯修整精修进给						DRESSER[28]
DEF NCK REAL DRESSER[29]		;纯修整粗修速度						DRESSER[29]
DEF NCK REAL DRESSER[30]		;纯修整精修速度						DRESSER[30]

DEF NCK REAL DRESSER[31]		;齿形相对修整轮左圆弧半径			DRESSER[31]
DEF NCK REAL DRESSER[32]		;齿形相对修整轮右圆弧半径			DRESSER[32]
DEF NCK REAL DRESSER[33]		;左修整轮对砂轮中心					DRESSER[33]
DEF NCK REAL DRESSER[34]		;右修整轮对砂轮中心					DRESSER[34]
;--------------------------------------------------------------------------------------------
;初始化参数(INI)
DEF NCK BOOL INI[0]		;螺纹旋向(0右旋/1左旋)					INI[0]
DEF NCK REAL INI[1]			;工件磨削左端坐标						INI[1]
DEF NCK REAL INI[2]			;工件磨削右端坐标						INI[2]
DEF NCK REAL INI[3]			;磨削长度								INI[3]
DEF NCK REAL INI[4]	;螺距									INI[4]
DEF NCK REAL INI[5]		;导程									INI[5]
DEF NCK REAL INI[6]		;磨削起点								INI[6]
DEF NCK REAL INI[7]		;磨削终点								INI[7]
DEF NCK REAL INI[8]		;磨削中点								INI[8]
DEF NCK REAL INI[9]	;磨削总角度								INI[9]
DEF NCK REAL INI[10]			;头数切换退刀时的X值					INI[10]
;--------------------------------------------------------------------------------------------
;对刀(TOOL_SET)
DEF NCK REAL TOOL_SET[0]		;初始对刀点Z轴坐标						TOOL_SET[0]
DEF NCK REAL TOOL_SET[1]		;对刀完成后Z轴坐标						TOOL_SET[1]
DEF NCK REAL TOOL_SET[2]			;对刀完成时手轮偏置值					TOOL_SET[2]
DEF NCK REAL TOOL_SET[3]		;完成对刀时砂轮X轴坐标					TOOL_SET[3]
DEF NCK REAL TOOL_SET[4]		;计算出的C轴起始角度					TOOL_SET[4]
DEF NCK REAL TOOL_SET[5]	;C轴初始角度							TOOL_SET[5]
DEF NCK REAL TOOL_SET[6]		;探头接触工件时C角度					TOOL_SET[6]
DEF NCK BOOL TOOL_SET[7]	;对刀方式(0手动/1自动）					TOOL_SET[7]
DEF NCK BOOL TOOL_SET[8]	;对刀类型(0首次/1二次)					TOOL_SET[8]
DEF NCK REAL TOOL_SET[9]		;测头半径								TOOL_SET[9]
DEF NCK REAL TOOL_SET[10]		;测头与砂轮距离							TOOL_SET[10]
DEF NCK REAL TOOL_SET[11]		;探头接触工件表面时X坐标(自动对刀参数)	TOOL_SET[11]
DEF NCK REAL TOOL_SET[12]	;砂轮接触工件表面时X坐标(自动对刀参数)	TOOL_SET[12]
DEF NCK REAL TOOL_SET[13]		;探头接触工件时X坐标					TOOL_SET[13]
DEF NCK REAL TOOL_SET[14]		;探头接触工件槽左侧时Z坐标				TOOL_SET[14]
DEF NCK REAL TOOL_SET[15]		;探头接触工件槽右侧时Z坐标				TOOL_SET[15]
DEF NCK REAL TOOL_SET[16]			;左齿形角								TOOL_SET[16]
DEF NCK REAL TOOL_SET[17]			;右齿形角								TOOL_SET[17]
DEF NCK REAL TOOL_SET[18];工件初开深度							TOOL_SET[18]
DEF NCK INT TOOL_SET[19]	;(0中点对刀/1起点对刀/2任意)			TOOL_SET[19]	
;--------------------------------------------------------------------------------------------
;滚轮参数(WHEEL)
DEF NCK REAL WHEEL[0]			;修整轮直径							WHEEL[0]
DEF NCK REAL WHEEL[1]	;修整轮线速度						WHEEL[1]
DEF NCK REAL WHEEL[2]		;双滚轮间距							WHEEL[2]
DEF NCK REAL WHEEL[3]		;方滚轮厚度							WHEEL[3]
DEF NCK REAL WHEEL[4]		;单滚轮左圆弧半径					WHEEL[4]	
DEF NCK REAL WHEEL[5]		;单滚轮右圆弧半径					WHEEL[5]
DEF NCK REAL WHEEL[6]		;双滚轮左圆弧半径					WHEEL[6]
DEF NCK REAL WHEEL[7]		;双滚轮右圆弧半径					WHEEL[7]
DEF NCK REAL WHEEL[8]		;方滚轮左圆弧半径					WHEEL[8]
DEF NCK REAL WHEEL[9]		;方滚轮右圆弧半径					WHEEL[9]
DEF NCK REAL WHEEL[10]	;当前左端接触位置					WHEEL[10]
DEF NCK REAL WHEEL[11]	;当前右端接触位置					WHEEL[11]
DEF NCK REAL WHEEL[12]		;初始左端接触位置					WHEEL[12]
DEF NCK REAL WHEEL[13]		;初始右端接触位置					WHEEL[13]
DEF NCK REAL WHEEL[14]		;滚压轮接触位置						WHEEL[14]
DEF NCK REAL WHEEL[15];双滚轮垂直误差						WHEEL[15]
;--------------------------------------------------------------------------------------------
;三角齿形(TRI)
DEF NCK REAL TRI[0]    	;齿高				TRI[0]
DEF NCK REAL TRI[1] ;左角				TRI[1]
DEF NCK REAL TRI[2] ;右角				TRI[2]
DEF NCK REAL TRI[3]  	;左半圆				TRI[3]
DEF NCK REAL TRI[4]  	;右半圆				TRI[4]
DEF NCK REAL TRI[5]  	;过渡左圆弧半径		TRI[5]
DEF NCK REAL TRI[6]  	;过渡右圆弧半径		TRI[6]
DEF NCK REAL TRI[7]  ;调整左角			TRI[7]
DEF NCK REAL TRI[8]  ;调整右角			TRI[8]
DEF NCK REAL TRI[9]  	;当前左角			TRI[9]
DEF NCK REAL TRI[10]  	;当前右角			TRI[10]
;--------------------------------------------------------------------------------------------
;梯形(TRAP)
DEF NCK REAL TRAP[0]			;齿高				TRAP[0]
DEF NCK REAL TRAP[1]    	;齿根高度			TRAP[1]
DEF NCK REAL TRAP[2]  	;左角				TRAP[2]
DEF NCK REAL TRAP[3]  	;右角				TRAP[3]
DEF NCK REAL TRAP[4]  		;左半圆				TRAP[4]
DEF NCK REAL TRAP[5]  		;右半圆				TRAP[5]
DEF NCK REAL TRAP[6] 		;过渡左圆弧半径		TRAP[6]	
DEF NCK REAL TRAP[7]  		;过渡右圆弧半径		TRAP[7]
DEF NCK REAL TRAP[8]  		;齿形螺距			TRAP[8]
DEF NCK REAL TRAP[9]  	;调整左角			TRAP[9]
DEF NCK REAL TRAP[10]  	;调整右角			TRAP[10]
DEF NCK REAL TRAP[11]  		;当前左角			TRAP[11]
DEF NCK REAL TRAP[12] 		;当前右角			TRAP[12]
;--------------------------------------------------------------------------------------------
;双圆弧(DARC)
DEF NCK REAL DARC[0]   			;齿高					DARC[0]
DEF NCK REAL DARC[1]    		;外圆直径				DARC[1]
DEF NCK REAL DARC[2]  		;球中心直径				DARC[2]
DEF NCK REAL DARC[3]  		;钢球直径				DARC[3]	
DEF NCK REAL DARC[4]  		;接触角					DARC[4]
DEF NCK REAL DARC[5]  		;初始滚道左半径			DARC[5]
DEF NCK REAL DARC[6] 		;初始滚道右半径			DARC[6]
DEF NCK REAL DARC[7]  		;调整滚道左半径			DARC[7]	
DEF NCK REAL DARC[8]  		;调整滚道右半径			DARC[8]
DEF NCK REAL DARC[9] 			;当前滚道左半径			DARC[9]
DEF NCK REAL DARC[10] 			;当前滚道右半径			DARC[10]
DEF NCK REAL DARC[11]  			;过渡圆弧半径			DARC[11]
DEF NCK REAL DARC[12]	;滚道左半径水平偏心		DARC[12]
DEF NCK REAL DARC[13]	;滚道右半径水平偏心		DARC[13]
DEF NCK REAL DARC[14]	;滚道左半径垂直偏心		DARC[14]
DEF NCK REAL DARC[15]	;滚道右半径垂直偏心		DARC[15]

;磨削参数(GRINDING)
DEF NCK INT GRINDING[0]		;磨削类型(0外螺纹/1内螺纹/2蜗杆/3外圆/4环形槽)	GRINDING[0]
DEF NCK BOOL GRINDING[1]	;是否修整(0否/1是)								GRINDING[1]
DEF NCK BOOL GRINDING[2]	;是否对刀(0否/1是)								GRINDING[2]
DEF NCK INT GRINDING[3]	;磨削循环类型									GRINDING[3]
;--------------------------------------------------------------------------------------------
;工序(PROCESS)
DEF NCK REAL TECH_R[10]
DEF NCK REAL TECH_MR[10]
DEF NCK REAL TECH_MF[10]
DEF NCK REAL TECH_F[10]
;;;;;;;;;;;;;;工序基本参数;;;;;;;;;;;;;;;;
DEF NCK BOOL PROCESS[0]				;工艺类型(0界面/1DIY)		PROCESS[0]
DEF NCK INT PROCESS[1]				;选择工艺					PROCESS[1]
DEF NCK INT PROCESS[2]			;当前工艺					PROCESS[2]
DEF NCK BOOL PROCESS[3]		;修整标记(0不修整/1修整)	PROCESS[3]
DEF NCK REAL PROCESS[4]		;当前砂轮进入工件位置		PROCESS[4]
DEF NCK INT PROCESS[5]				;DIY工序计数				PROCESS[5]
DEF NCK BOOL PROCESS[6]			;单双磨削					PROCESS[6]
DEF NCK INT PROCESS[7]	;当前磨削是否修整累计		PROCESS[7]
DEF NCK REAL PROCESS[8]		;磨削进给量					PROCESS[8]
DEF NCK REAL PROCESS[9]		;磨削速度					PROCESS[9]
DEF NCK REAL PROCESS[10]	;磨削砂轮线速度				PROCESS[10]

;;;;;;;;;;;;;;工艺表格参数;;;;;;;;;;;;;;;;
DEF NCK BOOL TECHNOLOGY[0]				;粗修单双磨削			TECHNOLOGY[0]
DEF NCK BOOL TECHNOLOGY[1]			;半粗修单双磨削			TECHNOLOGY[1]
DEF NCK BOOL TECHNOLOGY[2]			;半精修单双磨削			TECHNOLOGY[2]
DEF NCK BOOL TECHNOLOGY[3]				;精修单双磨削			TECHNOLOGY[3]

DEF NCK INT TECHNOLOGY[10]					;粗磨次数				TECHNOLOGY[10]
DEF NCK INT TECHNOLOGY[11]				;半粗磨次数				TECHNOLOGY[11]
DEF NCK INT TECHNOLOGY[12]				;半精磨次数				TECHNOLOGY[12]
DEF NCK INT TECHNOLOGY[13]					;精磨次数				TECHNOLOGY[13]

DEF NCK REAL TECHNOLOGY[20]			;粗修磨削进给量			TECHNOLOGY[20]
DEF NCK REAL TECHNOLOGY[21]			;半粗修磨削进给量		TECHNOLOGY[21]
DEF NCK REAL TECHNOLOGY[22]			;半精修磨削进给量		TECHNOLOGY[22]
DEF NCK REAL TECHNOLOGY[23]			;精修磨削进给量			TECHNOLOGY[23]

DEF NCK REAL TECHNOLOGY[30]			;粗修磨削速度			TECHNOLOGY[30]
DEF NCK REAL TECHNOLOGY[31]			;半粗修磨削速度			TECHNOLOGY[31]
DEF NCK REAL TECHNOLOGY[32]			;半精修磨削速度			TECHNOLOGY[32]
DEF NCK REAL TECHNOLOGY[33]			;精修磨削速度			TECHNOLOGY[33]

DEF NCK INT TECHNOLOGY[40]			;粗磨是否修整累计		TECHNOLOGY[40]
DEF NCK INT TECHNOLOGY[41]			;半粗磨是否修整累计		TECHNOLOGY[41]
DEF NCK INT TECHNOLOGY[42]			;半精磨是否修整累计		TECHNOLOGY[42]
DEF NCK INT TECHNOLOGY[43]			;精磨是否修整累计		TECHNOLOGY[43]

DEF NCK REAL TECHNOLOGY[50]	;磨削砂轮线速度			TECHNOLOGY[50]
DEF NCK REAL TECHNOLOGY[51]	;磨削砂轮线速度			TECHNOLOGY[51]
DEF NCK REAL TECHNOLOGY[52]	;磨削砂轮线速度			TECHNOLOGY[52]
DEF NCK REAL TECHNOLOGY[53]	;磨削砂轮线速度			TECHNOLOGY[53]

;;;;;;;;;;;;;;DIY参数;;;;;;;;;;;;;;;;
DEF NCK BOOL DIY[0]			;DIY单双磨削			DIY[0]
DEF NCK INT DIY[1]				;DIY磨削次数			DIY[1]
DEF NCK REAL DIY[2]		;DIY磨削进给量			DIY[2]
DEF NCK REAL DIY[3]		;DIY磨削速度			DIY[3]
DEF NCK INT DIY[4]			;DIY是否修整累计		DIY[4]
DEF NCK REAL DIY[5]	;DIY砂轮线速度			DIY[5]

;;;;;;;;;;;;;;工件头数参数;;;;;;;;;;;;;;;;
DEF NCK INT WORK[0]				;头数				WORK[0]
DEF NCK INT WORK[1]		;当前头数			WORK[1]
DEF NCK REAL WORK[2]		;平均头数角度		WORK[2]
DEF NCK REAL WORK[3]	;当前头角度			WORK[3]

;;;;;;;;;;;;;;当前磨削次数参数;;;;;;;;;;;;;;;;
DEF NCK INT TECH_TIME[0]	;当前粗磨次数		TECH_TIME[0]
DEF NCK INT TECH_TIME[1]	;当前半粗磨次数		TECH_TIME[1]
DEF NCK INT TECH_TIME[2]	;当前半精磨次数		TECH_TIME[2]
DEF NCK INT TECH_TIME[3]	;当前精磨次数		TECH_TIME[3]
DEF NCK INT TECH_TIME[4]	;当前DIY次数		TECH_TIME[4]

;;;;;;;;;;;;;;修整进给量参数;;;;;;;;;;;;;;;;
DEF NCK REAL TECH_DRESS_DEEP[0]		;修整进给量			TECH_DRESS_DEEP[0]
DEF NCK REAL TECH_DRESS_DEEP[1]		;粗修修整进给量		TECH_DRESS_DEEP[1]
DEF NCK REAL TECH_DRESS_DEEP[2]		;半粗修修整进给量	TECH_DRESS_DEEP[2]
DEF NCK REAL TECH_DRESS_DEEP[3]		;半精修修整进给量	TECH_DRESS_DEEP[3]
DEF NCK REAL TECH_DRESS_DEEP[4]		;精修修整进给量		TECH_DRESS_DEEP[4]
DEF NCK REAL TECH_DRESS_DEEP[5]	;DIY修整进给量		TECH_DRESS_DEEP[5]

;;;;;;;;;;;;;;修整速度参数;;;;;;;;;;;;;;;;
DEF NCK REAL TECH_DRESS_FEED[0]		;修整速度			TECH_DRESS_FEED[0]
DEF NCK REAL TECH_DRESS_FEED[1]		;粗修整速度			TECH_DRESS_FEED[1]
DEF NCK REAL TECH_DRESS_FEED[2]		;半粗修整速度		TECH_DRESS_FEED[2]
DEF NCK REAL TECH_DRESS_FEED[3]		;半精修整速度		TECH_DRESS_FEED[3]
DEF NCK REAL TECH_DRESS_FEED[4]		;精修整速度			TECH_DRESS_FEED[4]
DEF NCK REAL TECH_DRESS_FEED[5]	;DIY整速度			TECH_DRESS_FEED[5]

;;;;;;;;;;;;;;修整轮线速度参数;;;;;;;;;;;;;;;;
DEF NCK REAL WHEEL_LINESPEED_DRESS[0]		;修整砂轮线速度			WHEEL_LINESPEED_DRESS[0]
DEF NCK REAL WHEEL_LINESPEED_DRESS[1]	;单纯修整砂轮线速度		WHEEL_LINESPEED_DRESS[1]
DEF NCK REAL WHEEL_LINESPEED_DRESS[2]	;工艺修整砂轮线速度		WHEEL_LINESPEED_DRESS[2]
DEF NCK REAL WHEEL_LINESPEED_DRESS[3]	;粗磨修整砂轮线速度		WHEEL_LINESPEED_DRESS[3]
DEF NCK REAL WHEEL_LINESPEED_DRESS[4]	;半粗磨修整砂轮线速度	WHEEL_LINESPEED_DRESS[4]
DEF NCK REAL WHEEL_LINESPEED_DRESS[5]	;半精磨修整砂轮线速度	WHEEL_LINESPEED_DRESS[5]
DEF NCK REAL WHEEL_LINESPEED_DRESS[6]	;精磨修整砂轮线速度		WHEEL_LINESPEED_DRESS[6]
DEF NCK REAL WHEEL_LINESPEED_DRESS[7]	;DIY砂轮线速度			WHEEL_LINESPEED_DRESS[7]

;;;;;;;;;;;;;;磨削修整次数参数;;;;;;;;;;;;;;;;
DEF NCK INT TECH_DRESS_TIME[0]		;粗磨修整次数		TECH_DRESS_TIME[0]
DEF NCK INT TECH_DRESS_TIME[1]		;半粗磨修整次数		TECH_DRESS_TIME[1]
DEF NCK INT TECH_DRESS_TIME[2]		;半精磨修整次数		TECH_DRESS_TIME[2]
DEF NCK INT TECH_DRESS_TIME[3]		;精磨修整次数		TECH_DRESS_TIME[3]
DEF NCK INT TECH_DRESS_TIME[4]		;DIY修整次数		TECH_DRESS_TIME[4]
DEF NCK INT TECH_DRESS_TIME[5]			;当前磨削修整次数	TECH_DRESS_TIME[5]
;--------------------------------------------------------------------------------------------
M30;

